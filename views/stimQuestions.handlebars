<html>

<head>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-firestore.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css" type="text/css" />
  <script src="js/firebae.js"></script>
  <script src="js/userflowcontrol.js"></script>
  <script>
    requiresFirebase();
  </script>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col">
        <h3>Questions about video</h3>
        <h5>Answer all of the questions below:</h5>
        <div class="form-group row">
          <label class="col-6">Where did the crime occur?</label>
          <select id="formQuestion1" name="formQuestion1" onChange="checkInput()" class="form-control col-4">
            <option value="" selected disabled> Select... </option>
            <option value="in a house">In a classroom</option>
            <option value="in a parking structure">At a park</option>
            <option value="in a park">At the zoo</option>
            <option value="in an office">On a street</option>
          </select>
        </div>
        <div class="form-group row">
          <label class="col-6">What was the person in the video doing?</label>
          <select id="formQuestion2" onchange="checkInput()" class="form-control col-4">
            <option value="" selected disabled> Select...</option>
            <option value="a computer">Talking on a phone</option>
            <option value="a cell phone">Painting graffiti</option>
            <option value="a purse">Eating a sandwich</option>
            <option value="a box">Stealing a book</option>
          </select>
        </div>
        <button id="next-button" class="btn btn-primary" disabled=true onclick="submitForm()">Submit</button>
      </div>
      <div class="col-auto">
        <img src="media/ucsd.jpg" width=150>
      </div>
    </div>
  </div>

  <script>
    function checkInput() {
      let q1 = document.getElementById('formQuestion1');
      let question1 = q1.options[q1.selectedIndex].value;
      let q2 = document.getElementById('formQuestion2');
      let question2 = q2.options[q2.selectedIndex].value;
      if (question1 && question2) {
        document.getElementById("next-button").disabled = false;
      } else {
        document.getElementById("next-button").disabled = true;
      }
    }
    function submitForm() {
      let q1 = document.getElementById('formQuestion1');
      let question1 = q1.options[q1.selectedIndex].value;
      let q2 = document.getElementById('formQuestion2');
      let question2 = q2.options[q2.selectedIndex].value;
      setDatabase({
        'path': `${window.userId}/answers`,
        'data': {
          "Where was": question1,
          "What was": question2,
        }
      });
    }

  </script>
</body>

</html>
