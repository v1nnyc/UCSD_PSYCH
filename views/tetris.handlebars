<html>

<head>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-firestore.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css" type="text/css" />
  <script src="js/userflowcontrol.js"></script>
</head>

<body>
  <button id="next-button" hidden></button>
  <div class="container">
    <div class="progress">
      <div class="progress-bar progress-bar-striped active" id="myBar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:0%">
        Time Remaining
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col">
        <!-- Hey Webmaster! Place this html code where you'd like the game to appear. -->
        <iframe src="https://www.silvergames.com/en/2048/iframe" width="100%" height="1000" style="margin:0;padding:0;border:0"></iframe>
        <!-- End of game embed code -->
      </div>
    </div>
  </div>
  <script>
    var config = {
      apiKey: "AIzaSyCa5_e0vkkiBXQxKcpvGKHyumnWyvQ_os8",
      authDomain: "ucsd-psych.firebaseapp.com",
      databaseURL: "https://ucsd-psych.firebaseio.com",
      projectId: "ucsd-psych",
      storageBucket: "ucsd-psych.appspot.com",
      messagingSenderId: "325328536445"
    };

    firebase.initializeApp(config);

    // timeout is how long user plays game for
    let timeout = 30000;
    let date1;

      // firebase.auth().onAuthStateChanged(function(user) {
      //   if (user) {
      //     window.userId = user.uid;
      //   } else {
      //     window.location = "/debrief";
      //   }
      // });

      setTimeout(function(){
        setTimeout(clickNext, timeout);
        date1 = new Date();
        var elem = document.getElementById("myBar");
        var id = setInterval(function() {
          let date2 = new Date();
          let diff = date2 - date1; //milliseconds interval
          elem.style.width = ((diff / (timeout)) * 100) + '%';
        }, 100);
      }, 100)

  </script>
</body>

</html>
