<html>

<head>
	<script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-database.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.7.2/firebase-firestore.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">
	<link rel="stylesheet" href="css/styles.css" type="text/css" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
	<script src="js/firebae.js"></script>
	<script src="js/userflowcontrol.js"></script>
	<script>
		requiresFirebase();
	</script>
</head>

<body>
	<div class="container">
		<div class="row">
			<div class="col ">
				<h2>About you</h2>
				<h5 class="mb-3">Please answer the following questions about yourself:</h5>
				<div class="form-group row">
					<label class="col-6">Have you seen this video as part of a previous amazon turk survey?
					(Your response won't affect your payment). </label>
					<select class="form-control col-3" id="formSeen" onchange="checkInput()">
						<option value="" disabled selected>Select answer</option>
						<option value="Yes">Yes</option>
						<option value="No">No</option>
					</select>
				</div>
				<div class = "form-group row">
					<label class = "col-6"> How did you view this experiment?</label>
					<select class="form-control col-3" id="formHowTaken" onchange="checkInput()">
						<option value="" disabled selected>Select answer</option>
						<option value="Mobile">On mobile</option>
						<option value="Computer">On a computer</option>
						<option value ="Other">Other</option>
					</select>
				</div>
				<div class="form-group row">
					<label class="col-6">Please enter your age</label>
					<select class="form-control col-3" id="formAge" onchange="checkInput()" required>
						<option value="" disabled selected>Select age</option>
						<option value="16">16</option>
						<option value="17">17</option>
						<option value="18">18</option>
						<option value="19">19</option>
						<option value="20">20</option>
						<option value="21">21</option>
						<option value="22">22</option>
						<option value="23">23</option>
						<option value="24">24</option>
						<option value="25">25</option>
						<option value="26">26</option>
						<option value="27">27</option>
						<option value="28">28</option>
						<option value="29">29</option>
						<option value="30">30</option>
						<option value="31">31</option>
						<option value="32">32</option>
						<option value="33">33</option>
						<option value="34">34</option>
						<option value="35">35</option>
						<option value="36">36</option>
						<option value="37">37</option>
						<option value="38">38</option>
						<option value="39">39</option>
						<option value="40">40</option>
						<option value="41">41</option>
						<option value="42">42</option>
						<option value="43">43</option>
						<option value="44">44</option>
						<option value="45">45</option>
						<option value="46">46</option>
						<option value="47">47</option>
						<option value="48">48</option>
						<option value="49">49</option>
						<option value="50">50</option>
						<option value="51">51</option>
						<option value="52">52</option>
						<option value="53">53</option>
						<option value="54">54</option>
						<option value="55">55</option>
						<option value="56">56</option>
						<option value="57">57</option>
						<option value="58">58</option>
						<option value="59">59</option>
						<option value="60">60</option>
						<option value="61">61</option>
						<option value="62">62</option>
						<option value="63">63</option>
						<option value="64">64</option>
						<option value="65">65</option>
						<option value="66">66</option>
						<option value="67">67</option>
						<option value="68">68</option>
						<option value="69">69</option>
						<option value="70">70</option>
						<option value="71">71</option>
						<option value="72">72</option>
						<option value="73">73</option>
						<option value="74">74</option>
						<option value="75">75</option>
						<option value="76">76</option>
						<option value="77">77</option>
						<option value="78">78</option>
						<option value="79">79</option>
						<option value="80">80</option>
						<option value="81">81</option>
						<option value="82">82</option>
						<option value="83">83</option>
						<option value="84">84</option>
						<option value="85">85</option>
						<option value="86">86</option>
						<option value="87">87</option>
						<option value="88">88</option>
						<option value="89">89</option>
						<option value="90">90</option>
						<option value="91">91</option>
						<option value="92">92</option>
						<option value="93">93</option>
						<option value="94">94</option>
						<option value="95">95</option>
						<option value="96">96</option>
						<option value="97">97</option>
						<option value="98">98</option>
						<option value="99">99</option>
						<option value="100">100</option>
						<option value="101">101</option>
						<option value="102">102</option>
						<option value="103">103</option>
						<option value="104">104</option>
						<option value="105">105</option>
						<option value="106">106</option>
						<option value="107">107</option>
						<option value="108">108</option>
						<option value="109">109</option>
						<option value="110">110</option>
						<option value="111">111</option>
						<option value="112">112</option>
						<option value="113">113</option>
						<option value="114">114</option>
						<option value="115">115</option>
						<option value="116">116</option>
						<option value="117">117</option>
						<option value="118">118</option>
						<option value="119">119</option>
						<option value="120">120</option>
						<option value="NR">Do not wish to state</option>
					</select>
				</div>
				<div class="form-group row">
					<label class="col-6">Please enter your gender</label>
					<select class="form-control col-3" id="formGender" onchange="checkInput()">
						<option value="" disabled selected>Select gender</option>
						<option value="Female">Female</option>
						<option value="Male">Male</option>
						<option value="NR">Do not wish to state</option>
					</select>
				</div>
				<div class="form-group row">
					<label class="col-6">Please enter your level of education</label>
					<select class="form-control col-3" id="formEducation" onchange="checkInput()">
						<option value="" disabled selected>Select education level</option>
						<option value="Less than High School">Less than High School</option>
						<option value="High School/GED">High School/GED</option>
						<option value="2-Year College Degree (Associates)">2-Year College Degree (Associates)</option>
						<option value="Currently Attending College">Currently Attending College</option>
						<option value="4-Year College Degree (BA, BS)">4-Year College Degree (BA, BS)</option>
						<option value="Masters Degree">Masters Degree</option>
						<option value="Doctoral Degree">Doctoral Degree</option>
						<option value="Professional Degree (MD, JD)">Professional Degree (MD, JD)</option>
						<option value="NR">Do not wish to state</option>
					</select>
				</div>
				<div class="form-group row">
					<label class="col-6">Please enter your ethnicity</label>
					<select class="form-control col-3" id="formEthnicity" onchange="checkInput()">
						<option value="" disabled selected>Select ethnicity</option>
						<option value="AsianIndian">Asian/Indian</option>
						<option value="BlackAfrican">Black/African</option>
						<option value="LatinHispanic">Latin/Hispanic</option>
						<option value="Native American">Native American</option>
						<option value="WhiteEuropean">White/European</option>
						<option value="Other">Other</option>
						<option value="NR">Do not wish to state</option>
					</select>
				</div>
				<button id="next-button" type="" class="btn btn-primary" onclick="submitForm()" disabled>Submit</button>
			</div>
			<div class="col-auto">
				<img src="media/ucsd.jpg" width=150>
			</div>
		</div>
	</div>
	<script>
		function checkInput() {
			let ageField = document.querySelector('#formAge');
			let age = ageField.options[ageField.selectedIndex].value;
			let genderField = document.querySelector('#formGender');
			let gender = genderField.options[genderField.selectedIndex].value;
			let eduField = document.querySelector('#formEducation');
			let education = eduField.options[eduField.selectedIndex].value;
			let ethnField = document.querySelector('#formEthnicity');
			let ethnicity = ethnField.options[ethnField.selectedIndex].value;
			let seenField = document.querySelector('#formSeen');
			let seen = seenField.options[seenField.selectedIndex].value;
			if (age && gender && education && ethnicity && seen) {
				document.getElementById('next-button').disabled = false;
			} else {
				document.getElementById('next-button').disabled = true;
			}
		}
		function submitForm() {
			let ageField = document.querySelector('#formAge');
			let age = ageField.options[ageField.selectedIndex].value;
			let genderField = document.querySelector('#formGender');
			let gender = genderField.options[genderField.selectedIndex].value;
			let eduField = document.querySelector('#formEducation');
			let education = eduField.options[eduField.selectedIndex].value;
			let ethnField = document.querySelector('#formEthnicity');
			let ethnicity = ethnField.options[ethnField.selectedIndex].value;
			let seenField = document.querySelector('#formSeen');
			let seen = seenField.options[seenField.selectedIndex].value;
			let howTakenField = document.querySelector('#formHowTaken');
			let howTaken = document.options[howTakenField.selectedIndex].value;
			setDatabase({
				'path': `${window.userId}/demographics`,
				'data': {
					"seen before": seen,
					"how taken": howTaken,
					"age": age,
					"education level": education,
					"ethnicity": ethnicity,
					"gender": gender,
				}
			}).then(e => {
				firebase.auth().signOut()
			});
		}
	</script>
</body>

</html>
